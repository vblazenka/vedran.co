<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vedran Bla≈æenka - Software Developer</title>

    <link rel="stylesheet" href="../src/styles/styles.css">
    <link rel="stylesheet" href="../src/styles/blog.css">
    <link rel="preload" href="../src/styles/prism.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
</head>

<body class="Blog">
    <header>
        <div class="navigation">
            <a href="../index.html">üëà Go back</a>
        </div>
    </header>

    <main class="post">
<h1 id="monkeypatching">Monkey patching</h1>
<p>Monkey patching is a mechanism we can use to replace or extend some piece of code at runtime.
A lot of times it is used for overriding methods in third-party libraries or for mocking when writing unit tests.</p>
<p>As an example, let's say we want to add logging to the <code>add</code> method of a math library.</p>
<pre><code class="javascript language-javascript">import MathLib from 'mathlib';

const mathLib = new MathLib();
const res = mathLib.add(2, 3);

// we can keep original implementation if we want to
// restore original implementation later on
// const originalAdd = mathLib.add;

// Let's override (monkey patch) original add
// method and replace it with our own implementation
// that supports logging
mathLib.add = function(a, b) {
    console.log(`You are adding ${a} and ${b}.`);
    return a + b;
}
</code></pre>
<p>üëç <strong>Pros:</strong></p>
<ul>
<li>useful for mocking during unit testing (libraries usually provide a way to do it properly)</li>
<li>workaround for bugs in third-party code</li>
<li>add code logging/analysis libraries to existing code</li>
</ul>
<p>üëé <strong>Cons:</strong></p>
<ul>
<li>creates a discrepancy between original source code and observable behaviour in the written code</li>
<li>hard to debug issues due to the discrepancy mentioned in the previous point</li>
</ul>
<h2 id="practicetime">Practice time</h2>
<ul>
<li>What is monkey patching?</li>
<li>What are some scenarios where you could use monkey patching?</li>
<li>What are the downsides of using monkey patching?</li>
</ul>
    </main>

    <script src="../src/scripts/prism.js"></script>
    <noscript>
        <link rel="stylesheet" href="../src/styles/prism.css">
    </noscript>
</body>

</html>